<%= render "shared/header" %>
<main class="w-full max-w-4xl bg-white shadow-lg rounded-xl p-8 mb-8">
  <h2 class="text-2xl font-semibold text-gray-800 mb-2 border-b-2 border-blue-400 pb-2">新規タスク投稿</h2>

  <!-- 投稿カウンター -->
  <div id="newPostCounter" class="text-right text-gray-600 text-sm mb-6">
    本日投稿されたタスク数: <span id="postedTaskCount"><%#= new_tasks_count %></span> 件
  </div>

  <div class="space-y-6">
    <%= form_with(model: @task, local: true, id: "task-form") do |f| %>
    <!-- アクションボタン -->
    <div class="flex flex-col sm:flex-row justify-end space-y-4 sm:space-y-0 sm:space-x-4 pb-4">
        <%= button_tag "あとで書く", type: "submit", data: { editing: "true" }, class: "bg-gray-400 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out text-lg" %>
        <%# <button id="writeLaterBtn" type="button" class="bg-gray-400 hover:bg-gray-500 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out text-lg">
        あとで書く
        </button> %>
        <%= f.submit "タスクを投稿", data: { editing: "false" }, class: "bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out text-lg" %>
    </div>

    <!-- タスク名 -->
    <div>
        <%= f.label :title, "タスク名", class: "block text-lg font-medium text-gray-700 mb-2" %>
        <%= f.text_field :title, placeholder: "例: 〇〇プロジェクトの資料作成", class: "mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-gray-900 text-lg" %>
    </div>

    <!-- カテゴリ -->
    <div>
        <%= f.label :category_id, "カテゴリ", class: "block text-lg font-medium text-gray-700 mb-2" %>
        <%= f.collection_select :category_id, Category.all, :id, :name,
            { prompt: "選択してください" },
            { class: "mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-gray-900 text-lg" } %>
    </div>

    <!-- 締切日 -->
    <div>
        <%= f.label :deadline, "締切日", class: "block text-lg font-medium text-gray-700 mb-2" %>
        <%= f.date_field :deadline, class: "mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-gray-900 text-lg" %>
    </div>

    <!-- 重要度 -->
    <div>
        <%= f.label :priority_id, "重要度", class: "block text-lg font-medium text-gray-700 mb-2" %>
        <%= f.collection_select :priority_id, Priority.all, :id, :name,
            { prompt: "選択してください" },
            { class: "mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-gray-900 text-lg" } %>
    </div>

    <!-- 詳細メモ -->
    <div>
        <%= f.label :details, "タスクの詳細", class: "block text-lg font-medium text-gray-700 mb-2" %>
        <%= f.text_area :details, rows: 4, placeholder: "タスクの詳細や補足事項を記入してください。", class: "mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-gray-900 text-lg" %>
    </div>

    <!-- 編集が必要か -->
    <%= f.hidden_field :needs_editing, id: "needs_editing" %>
    <% end %>
  </div>
</main>

<!-- タスク一覧への導線 -->
<section class="w-full max-w-4xl bg-white shadow-lg rounded-xl p-8 text-center">
  <h2 class="text-2xl font-semibold text-gray-800 mb-6 border-b-2 border-blue-400 pb-2">タスクの確認</h2>
  <p class="text-gray-700 text-lg mb-6">現在のタスク一覧を確認したり、編集・削除したい場合はこちらから。</p>

  <%#= link_to 'タスク一覧を表示', tasks_path, class: "inline-block bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition duration-300 ease-in-out text-xl" %>
</section>

